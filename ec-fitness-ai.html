<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EC Fitness AI Specialist</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Mono:wght@300;400;500&family=Syne:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --black: #0a0a0a;
    --white: #f5f2ee;
    --cream: #ede9e3;
    --accent: #c8f542;
    --accent2: #ff6b35;
    --gray: #6b6b6b;
    --border: #2a2a2a;
    --card: #141414;
    --red-flag: #ff3b3b;
    --yellow-flag: #ffd93d;
    --green-flag: #6bcb77;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--black);
    color: var(--white);
    font-family: 'DM Mono', monospace;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* ‚îÄ‚îÄ‚îÄ NAV ‚îÄ‚îÄ‚îÄ */
  nav {
    position: fixed; top: 0; left: 0; right: 0; z-index: 100;
    display: flex; align-items: center; justify-content: space-between;
    padding: 18px 40px;
    background: rgba(10,10,10,0.92);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
  }
  .nav-logo {
    font-family: 'Syne', sans-serif;
    font-weight: 800; font-size: 1.1rem;
    letter-spacing: 0.08em;
  }
  .nav-logo span { color: var(--accent); }
  .nav-tabs { display: flex; gap: 4px; }
  .nav-tab {
    padding: 8px 18px; border: 1px solid transparent;
    background: none; color: var(--gray); cursor: pointer;
    font-family: 'DM Mono', monospace; font-size: 0.72rem;
    letter-spacing: 0.1em; text-transform: uppercase;
    transition: all 0.2s; border-radius: 2px;
  }
  .nav-tab.active {
    color: var(--accent); border-color: var(--accent);
    background: rgba(200,245,66,0.06);
  }
  .nav-tab:hover:not(.active) { color: var(--white); border-color: var(--border); }

  /* ‚îÄ‚îÄ‚îÄ VIEWS ‚îÄ‚îÄ‚îÄ */
  .view { display: none; padding-top: 80px; min-height: 100vh; }
  .view.active { display: block; }

  /* ‚îÄ‚îÄ‚îÄ HERO ‚îÄ‚îÄ‚îÄ */
  .hero {
    padding: 80px 40px 60px;
    border-bottom: 1px solid var(--border);
    position: relative; overflow: hidden;
  }
  .hero::before {
    content: 'EC';
    position: absolute; right: -20px; top: -40px;
    font-family: 'DM Serif Display', serif;
    font-size: 28vw; color: rgba(200,245,66,0.03);
    line-height: 1; pointer-events: none; user-select: none;
  }
  .hero-label {
    font-size: 0.68rem; letter-spacing: 0.2em; text-transform: uppercase;
    color: var(--accent); margin-bottom: 20px;
    display: flex; align-items: center; gap: 10px;
  }
  .hero-label::before {
    content: ''; display: block; width: 30px; height: 1px; background: var(--accent);
  }
  .hero h1 {
    font-family: 'DM Serif Display', serif;
    font-size: clamp(2.4rem, 6vw, 5rem);
    line-height: 1.05; max-width: 700px;
    margin-bottom: 24px;
  }
  .hero h1 em { font-style: italic; color: var(--accent); }
  .hero p {
    color: var(--gray); max-width: 520px;
    font-size: 0.82rem; line-height: 1.8;
  }

  /* ‚îÄ‚îÄ‚îÄ PROGRESS STEPPER ‚îÄ‚îÄ‚îÄ */
  .stepper {
    display: flex; align-items: center; gap: 0;
    padding: 30px 40px;
    border-bottom: 1px solid var(--border);
    overflow-x: auto;
  }
  .step {
    display: flex; align-items: center; gap: 12px;
    flex-shrink: 0;
  }
  .step-num {
    width: 32px; height: 32px; border-radius: 50%;
    border: 1px solid var(--border);
    display: flex; align-items: center; justify-content: center;
    font-size: 0.7rem; color: var(--gray);
    transition: all 0.3s;
  }
  .step.active .step-num { border-color: var(--accent); color: var(--accent); background: rgba(200,245,66,0.08); }
  .step.done .step-num { background: var(--accent); color: var(--black); border-color: var(--accent); }
  .step-label { font-size: 0.68rem; letter-spacing: 0.08em; text-transform: uppercase; color: var(--gray); }
  .step.active .step-label { color: var(--white); }
  .step.done .step-label { color: var(--accent); }
  .step-line { width: 40px; height: 1px; background: var(--border); flex-shrink: 0; margin: 0 4px; }
  .step.done + .step-line { background: var(--accent); }

  /* ‚îÄ‚îÄ‚îÄ FORM SECTIONS ‚îÄ‚îÄ‚îÄ */
  .form-section { display: none; }
  .form-section.active { display: block; }
  .section-wrap { padding: 50px 40px; max-width: 860px; }
  .section-title {
    font-family: 'Syne', sans-serif; font-weight: 700;
    font-size: 1.5rem; margin-bottom: 6px;
  }
  .section-subtitle {
    font-size: 0.74rem; color: var(--gray); margin-bottom: 40px;
    letter-spacing: 0.05em;
  }

  /* ‚îÄ‚îÄ‚îÄ FORM ELEMENTS ‚îÄ‚îÄ‚îÄ */
  .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
  .form-grid.three { grid-template-columns: 1fr 1fr 1fr; }
  .form-grid.full { grid-template-columns: 1fr; }
  .field { display: flex; flex-direction: column; gap: 8px; }
  .field.span2 { grid-column: span 2; }
  .field.span3 { grid-column: span 3; }
  label {
    font-size: 0.65rem; letter-spacing: 0.15em;
    text-transform: uppercase; color: var(--gray);
  }
  input, select, textarea {
    background: var(--card); border: 1px solid var(--border);
    color: var(--white); padding: 12px 16px;
    font-family: 'DM Mono', monospace; font-size: 0.82rem;
    border-radius: 3px; outline: none;
    transition: border-color 0.2s;
    width: 100%;
  }
  input:focus, select:focus, textarea:focus { border-color: var(--accent); }
  select option { background: var(--card); }
  textarea { resize: vertical; min-height: 80px; }

  .radio-group { display: flex; gap: 10px; flex-wrap: wrap; }
  .radio-btn {
    padding: 9px 18px; border: 1px solid var(--border);
    background: var(--card); color: var(--gray); cursor: pointer;
    font-family: 'DM Mono', monospace; font-size: 0.72rem;
    letter-spacing: 0.08em; border-radius: 2px;
    transition: all 0.15s; user-select: none;
  }
  .radio-btn.selected { border-color: var(--accent); color: var(--accent); background: rgba(200,245,66,0.06); }

  .scale-row { display: flex; align-items: center; gap: 14px; }
  .scale-row label { white-space: nowrap; min-width: 160px; }
  input[type=range] {
    -webkit-appearance: none; padding: 0;
    height: 3px; background: var(--border); border: none;
    border-radius: 2px; flex: 1;
  }
  input[type=range]::-webkit-slider-thumb {
    -webkit-appearance: none; width: 16px; height: 16px;
    background: var(--accent); border-radius: 50%; cursor: pointer;
  }
  .scale-val {
    font-size: 0.85rem; color: var(--accent);
    min-width: 28px; text-align: right;
  }

  .divider {
    border: none; border-top: 1px solid var(--border);
    margin: 36px 0;
  }
  .subsection-label {
    font-family: 'Syne', sans-serif; font-weight: 600;
    font-size: 0.78rem; letter-spacing: 0.15em;
    text-transform: uppercase; color: var(--accent);
    margin-bottom: 20px; padding-bottom: 10px;
    border-bottom: 1px solid rgba(200,245,66,0.2);
  }

  /* ‚îÄ‚îÄ‚îÄ VIDEO UPLOAD ‚îÄ‚îÄ‚îÄ */
  .upload-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
  .upload-box {
    border: 1px dashed var(--border); border-radius: 4px;
    padding: 30px 20px; text-align: center;
    cursor: pointer; transition: all 0.2s;
    position: relative; overflow: hidden;
  }
  .upload-box:hover { border-color: var(--accent); background: rgba(200,245,66,0.03); }
  .upload-box.has-file { border-color: var(--accent); border-style: solid; }
  .upload-icon { font-size: 2rem; margin-bottom: 12px; }
  .upload-title {
    font-family: 'Syne', sans-serif; font-weight: 600;
    font-size: 0.82rem; margin-bottom: 6px;
  }
  .upload-desc { font-size: 0.68rem; color: var(--gray); line-height: 1.6; }
  .upload-status { font-size: 0.7rem; color: var(--accent); margin-top: 8px; }
  .upload-box input[type=file] {
    position: absolute; inset: 0; opacity: 0; cursor: pointer;
    width: 100%; height: 100%; padding: 0;
  }
  .upload-note {
    font-size: 0.68rem; color: var(--gray);
    margin-top: 16px; line-height: 1.7;
    padding: 14px 18px; background: var(--card);
    border-left: 2px solid var(--accent2);
  }

  /* ‚îÄ‚îÄ‚îÄ PAR-Q CHECKLIST ‚îÄ‚îÄ‚îÄ */
  .parq-item {
    display: flex; align-items: flex-start; gap: 16px;
    padding: 16px 0; border-bottom: 1px solid var(--border);
  }
  .parq-item:last-child { border-bottom: none; }
  .parq-text { flex: 1; font-size: 0.78rem; line-height: 1.7; color: var(--white); }
  .parq-text strong { color: var(--accent2); }
  .toggle-yn { display: flex; gap: 6px; flex-shrink: 0; margin-top: 2px; }
  .yn-btn {
    padding: 6px 14px; border: 1px solid var(--border);
    background: var(--card); color: var(--gray); cursor: pointer;
    font-family: 'DM Mono', monospace; font-size: 0.68rem;
    letter-spacing: 0.1em; border-radius: 2px; transition: all 0.15s;
  }
  .yn-btn.yes.selected { border-color: var(--red-flag); color: var(--red-flag); background: rgba(255,59,59,0.08); }
  .yn-btn.no.selected { border-color: var(--green-flag); color: var(--green-flag); background: rgba(107,203,119,0.08); }

  /* ‚îÄ‚îÄ‚îÄ NAVIGATION BUTTONS ‚îÄ‚îÄ‚îÄ */
  .form-nav {
    display: flex; justify-content: space-between; align-items: center;
    padding: 30px 40px;
    border-top: 1px solid var(--border);
    background: rgba(10,10,10,0.6);
    backdrop-filter: blur(8px);
    position: sticky; bottom: 0;
  }
  .btn {
    padding: 13px 32px; cursor: pointer;
    font-family: 'DM Mono', monospace; font-size: 0.75rem;
    letter-spacing: 0.12em; text-transform: uppercase;
    border-radius: 2px; transition: all 0.2s; border: 1px solid;
  }
  .btn-primary {
    background: var(--accent); color: var(--black); border-color: var(--accent);
    font-weight: 500;
  }
  .btn-primary:hover { background: #d4ff55; }
  .btn-secondary { background: none; color: var(--gray); border-color: var(--border); }
  .btn-secondary:hover { color: var(--white); border-color: var(--white); }
  .btn-submit {
    background: var(--accent2); color: var(--white); border-color: var(--accent2);
    font-weight: 500;
  }
  .btn-submit:hover { background: #ff7d4d; }

  /* ‚îÄ‚îÄ‚îÄ SUBMISSION SCREEN ‚îÄ‚îÄ‚îÄ */
  .submit-screen {
    display: none; flex-direction: column; align-items: center;
    justify-content: center; min-height: 60vh;
    padding: 60px 40px; text-align: center;
  }
  .submit-screen.active { display: flex; }
  .submit-icon { font-size: 4rem; margin-bottom: 24px; }
  .submit-screen h2 {
    font-family: 'DM Serif Display', serif; font-size: 2.5rem;
    margin-bottom: 14px;
  }
  .submit-screen p { color: var(--gray); max-width: 460px; line-height: 1.8; font-size: 0.8rem; }
  .processing-bar {
    width: 300px; height: 3px; background: var(--border);
    border-radius: 2px; margin: 30px auto 0;
    overflow: hidden;
  }
  .processing-fill {
    height: 100%; background: var(--accent);
    animation: fill 3s ease-out forwards;
  }
  @keyframes fill { from { width: 0; } to { width: 100%; } }

  /* ‚îÄ‚îÄ‚îÄ TRAINER DASHBOARD ‚îÄ‚îÄ‚îÄ */
  .dashboard-header {
    padding: 50px 40px 30px;
    border-bottom: 1px solid var(--border);
  }
  .dash-label {
    font-size: 0.65rem; letter-spacing: 0.2em; text-transform: uppercase;
    color: var(--accent2); margin-bottom: 12px;
    display: flex; align-items: center; gap: 10px;
  }
  .dash-label::before { content: ''; display: block; width: 20px; height: 1px; background: var(--accent2); }
  .dashboard-header h2 {
    font-family: 'DM Serif Display', serif; font-size: 2.4rem;
  }

  /* ‚îÄ‚îÄ‚îÄ CLIENT SELECTOR ‚îÄ‚îÄ‚îÄ */
  .client-bar {
    display: flex; align-items: center; gap: 16px;
    padding: 20px 40px; border-bottom: 1px solid var(--border);
    overflow-x: auto;
  }
  .client-chip {
    display: flex; align-items: center; gap: 10px;
    padding: 10px 18px; border: 1px solid var(--border);
    border-radius: 100px; cursor: pointer; transition: all 0.2s;
    flex-shrink: 0;
  }
  .client-chip.active { border-color: var(--accent); background: rgba(200,245,66,0.06); }
  .client-avatar {
    width: 28px; height: 28px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 0.7rem; font-weight: 600;
    background: var(--border);
  }
  .client-chip.active .client-avatar { background: var(--accent); color: var(--black); }
  .client-name { font-size: 0.75rem; }
  .client-flag {
    width: 8px; height: 8px; border-radius: 50%;
  }

  /* ‚îÄ‚îÄ‚îÄ DASHBOARD GRID ‚îÄ‚îÄ‚îÄ */
  .dash-grid {
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    grid-template-rows: auto;
    gap: 1px;
    background: var(--border);
    border-top: 1px solid var(--border);
  }
  .dash-card {
    background: var(--black); padding: 28px 30px;
  }
  .dash-card.wide { grid-column: span 2; }
  .dash-card.full { grid-column: span 3; }
  .card-label {
    font-size: 0.62rem; letter-spacing: 0.18em;
    text-transform: uppercase; color: var(--gray);
    margin-bottom: 18px; display: flex; align-items: center;
    justify-content: space-between;
  }
  .card-label .badge {
    padding: 3px 8px; border-radius: 2px;
    font-size: 0.6rem; letter-spacing: 0.1em;
  }
  .badge-red { background: rgba(255,59,59,0.15); color: var(--red-flag); border: 1px solid rgba(255,59,59,0.3); }
  .badge-yellow { background: rgba(255,217,61,0.15); color: var(--yellow-flag); border: 1px solid rgba(255,217,61,0.3); }
  .badge-green { background: rgba(107,203,119,0.15); color: var(--green-flag); border: 1px solid rgba(107,203,119,0.3); }

  /* ‚îÄ‚îÄ‚îÄ RISK FLAGS ‚îÄ‚îÄ‚îÄ */
  .flag-list { display: flex; flex-direction: column; gap: 10px; }
  .flag-item {
    display: flex; align-items: flex-start; gap: 12px;
    padding: 12px 14px; border-radius: 3px;
  }
  .flag-item.red { background: rgba(255,59,59,0.07); border-left: 2px solid var(--red-flag); }
  .flag-item.yellow { background: rgba(255,217,61,0.07); border-left: 2px solid var(--yellow-flag); }
  .flag-item.green { background: rgba(107,203,119,0.07); border-left: 2px solid var(--green-flag); }
  .flag-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; margin-top: 5px; }
  .flag-dot.red { background: var(--red-flag); }
  .flag-dot.yellow { background: var(--yellow-flag); }
  .flag-dot.green { background: var(--green-flag); }
  .flag-text { font-size: 0.74rem; line-height: 1.6; }
  .flag-source { font-size: 0.62rem; color: var(--gray); margin-top: 4px; font-style: italic; }

  /* ‚îÄ‚îÄ‚îÄ BIOMECHANICAL FINDINGS ‚îÄ‚îÄ‚îÄ */
  .findings-table { width: 100%; border-collapse: collapse; }
  .findings-table th {
    font-size: 0.6rem; letter-spacing: 0.15em; text-transform: uppercase;
    color: var(--gray); padding: 8px 12px; text-align: left;
    border-bottom: 1px solid var(--border);
  }
  .findings-table td { padding: 10px 12px; font-size: 0.75rem; border-bottom: 1px solid rgba(42,42,42,0.5); vertical-align: top; }
  .findings-table tr:last-child td { border-bottom: none; }
  .comp-tag {
    display: inline-block; padding: 3px 8px; border-radius: 2px;
    font-size: 0.62rem; letter-spacing: 0.08em;
    background: rgba(255,107,53,0.12); color: var(--accent2);
    border: 1px solid rgba(255,107,53,0.3);
  }
  .muscle-list { display: flex; flex-wrap: wrap; gap: 4px; margin-top: 4px; }
  .muscle-tag {
    padding: 2px 7px; font-size: 0.6rem; border-radius: 2px;
  }
  .muscle-tag.over { background: rgba(255,59,59,0.1); color: #ff8080; }
  .muscle-tag.under { background: rgba(107,203,119,0.1); color: #8fdb97; }

  /* ‚îÄ‚îÄ‚îÄ CEX PROTOCOL ‚îÄ‚îÄ‚îÄ */
  .cex-stages { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
  .cex-stage { padding: 16px; border: 1px solid var(--border); border-radius: 3px; }
  .cex-stage-num {
    font-size: 0.58rem; letter-spacing: 0.2em; text-transform: uppercase;
    color: var(--accent); margin-bottom: 6px;
  }
  .cex-stage-name {
    font-family: 'Syne', sans-serif; font-weight: 700;
    font-size: 0.85rem; margin-bottom: 10px;
  }
  .cex-item { font-size: 0.72rem; color: var(--gray); padding: 3px 0; display: flex; gap: 8px; }
  .cex-item::before { content: '‚Üí'; color: var(--accent); flex-shrink: 0; }

  /* ‚îÄ‚îÄ‚îÄ BEHAVIOR STAGE ‚îÄ‚îÄ‚îÄ */
  .stage-meter { margin-bottom: 20px; }
  .stage-track {
    display: flex; height: 6px; border-radius: 3px; overflow: hidden;
    margin-bottom: 8px; gap: 2px;
  }
  .stage-seg { flex: 1; background: var(--border); border-radius: 1px; transition: background 0.5s; }
  .stage-seg.lit { background: var(--accent); }
  .stage-labels { display: flex; justify-content: space-between; }
  .stage-label-item { font-size: 0.55rem; color: var(--gray); text-align: center; flex: 1; }
  .stage-current {
    font-family: 'Syne', sans-serif; font-weight: 700;
    font-size: 1.2rem; margin-bottom: 6px;
  }
  .stage-desc { font-size: 0.72rem; color: var(--gray); line-height: 1.7; }
  .goal-list { display: flex; flex-direction: column; gap: 8px; margin-top: 16px; }
  .goal-item { display: flex; align-items: center; gap: 10px; font-size: 0.73rem; }
  .goal-bar-wrap { flex: 1; height: 3px; background: var(--border); border-radius: 2px; }
  .goal-bar { height: 100%; border-radius: 2px; background: var(--accent); }
  .goal-score { color: var(--accent); font-size: 0.7rem; min-width: 24px; text-align: right; }

  /* ‚îÄ‚îÄ‚îÄ AI GENERATE BUTTON ‚îÄ‚îÄ‚îÄ */
  .ai-generate-wrap {
    padding: 24px 40px;
    border-bottom: 1px solid var(--border);
    display: flex; align-items: center; gap: 20px;
  }
  .ai-generate-btn {
    display: flex; align-items: center; gap: 10px;
    padding: 13px 28px; border: 1px solid var(--accent);
    background: rgba(200,245,66,0.06); color: var(--accent);
    cursor: pointer; font-family: 'DM Mono', monospace;
    font-size: 0.72rem; letter-spacing: 0.12em; text-transform: uppercase;
    border-radius: 2px; transition: all 0.2s;
  }
  .ai-generate-btn:hover { background: rgba(200,245,66,0.12); }
  .ai-generate-btn .spinner {
    display: none; width: 14px; height: 14px;
    border: 2px solid rgba(200,245,66,0.3);
    border-top-color: var(--accent); border-radius: 50%;
    animation: spin 0.7s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }
  .ai-note { font-size: 0.68rem; color: var(--gray); max-width: 500px; line-height: 1.6; }

  /* ‚îÄ‚îÄ‚îÄ AI RESPONSE AREA ‚îÄ‚îÄ‚îÄ */
  .ai-response {
    display: none; padding: 28px 30px;
    background: var(--card); border-left: 2px solid var(--accent);
    margin: 0;
  }
  .ai-response.visible { display: block; }
  .ai-response-label {
    font-size: 0.6rem; letter-spacing: 0.2em; text-transform: uppercase;
    color: var(--accent); margin-bottom: 12px;
    display: flex; align-items: center; gap: 8px;
  }
  .ai-response-label::before {
    content: '‚óÜ'; font-size: 0.5rem;
  }
  .ai-response-text { font-size: 0.78rem; line-height: 1.85; color: var(--white); white-space: pre-wrap; }

  /* ‚îÄ‚îÄ‚îÄ LOADING STATE ‚îÄ‚îÄ‚îÄ */
  .loading-dots::after {
    content: '';
    animation: dots 1.5s infinite;
  }
  @keyframes dots {
    0%   { content: ''; }
    33%  { content: '.'; }
    66%  { content: '..'; }
    100% { content: '...'; }
  }

  /* ‚îÄ‚îÄ‚îÄ EMPTY DASHBOARD ‚îÄ‚îÄ‚îÄ */
  .empty-state {
    grid-column: span 3;
    padding: 80px 40px; text-align: center; color: var(--gray);
  }
  .empty-state h3 { font-family: 'Syne', sans-serif; font-size: 1.2rem; margin-bottom: 10px; color: var(--white); }
  .empty-state p { font-size: 0.76rem; line-height: 1.8; max-width: 400px; margin: 0 auto; }

  /* ‚îÄ‚îÄ‚îÄ RESPONSIVE ‚îÄ‚îÄ‚îÄ */
  @media (max-width: 768px) {
    nav { padding: 14px 20px; }
    .hero, .section-wrap, .form-nav { padding-left: 20px; padding-right: 20px; }
    .form-grid { grid-template-columns: 1fr; }
    .form-grid.three { grid-template-columns: 1fr 1fr; }
    .field.span2, .field.span3 { grid-column: span 1; }
    .dash-grid { grid-template-columns: 1fr; }
    .dash-card.wide, .dash-card.full { grid-column: span 1; }
    .cex-stages { grid-template-columns: 1fr; }
    .upload-grid { grid-template-columns: 1fr; }
    .stepper { padding: 20px; }
  }
</style>
</head>
<body>

<!-- ‚îÄ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ‚îÄ -->
<nav>
  <div class="nav-logo">EC<span>.</span>FITNESS</div>
  <div class="nav-tabs">
    <button class="nav-tab active" onclick="switchView('client')">Client Intake</button>
    <button class="nav-tab" onclick="switchView('trainer')">Trainer Dashboard</button>
  </div>
</nav>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     CLIENT INTAKE VIEW
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="view active" id="view-client">

  <!-- Hero -->
  <div class="hero">
    <div class="hero-label">Pre-Session Intake Portal</div>
    <h1>Your assessment,<br><em>before</em> we meet.</h1>
    <p>Complete this form at your own pace. Your trainer will review findings prior to your first session ‚Äî so your time together is focused entirely on strategy and goals.</p>
  </div>

  <!-- Stepper -->
  <div class="stepper" id="stepper">
    <div class="step active" id="step-0"><div class="step-num">1</div><div class="step-label">PAR-Q+</div></div>
    <div class="step-line"></div>
    <div class="step" id="step-1"><div class="step-num">2</div><div class="step-label">Health History</div></div>
    <div class="step-line"></div>
    <div class="step" id="step-2"><div class="step-num">3</div><div class="step-label">Body Composition</div></div>
    <div class="step-line"></div>
    <div class="step" id="step-3"><div class="step-num">4</div><div class="step-label">Goals</div></div>
    <div class="step-line"></div>
    <div class="step" id="step-4"><div class="step-num">5</div><div class="step-label">Assessments</div></div>
  </div>

  <!-- ‚îÄ‚îÄ‚îÄ SECTION 0: PAR-Q+ ‚îÄ‚îÄ‚îÄ -->
  <div class="form-section active" id="section-0">
    <div class="section-wrap">
      <div class="section-title">PAR-Q+ Health Screening</div>
      <div class="section-subtitle">Physical Activity Readiness Questionnaire ¬∑ 2023 Edition ¬∑ Answer all 7 questions honestly</div>

      <div class="parq-item">
        <div class="parq-text">1. Has your doctor ever said that you have a <strong>heart condition</strong> OR <strong>high blood pressure</strong>?</div>
        <div class="toggle-yn">
          <button class="yn-btn yes" onclick="toggleYN(this,'parq1','yes')">YES</button>
          <button class="yn-btn no" onclick="toggleYN(this,'parq1','no')">NO</button>
        </div>
      </div>
      <div class="parq-item">
        <div class="parq-text">2. Do you feel <strong>pain in your chest</strong> at rest, during daily activities, OR when you do physical activity?</div>
        <div class="toggle-yn">
          <button class="yn-btn yes" onclick="toggleYN(this,'parq2','yes')">YES</button>
          <button class="yn-btn no" onclick="toggleYN(this,'parq2','no')">NO</button>
        </div>
      </div>
      <div class="parq-item">
        <div class="parq-text">3. Do you <strong>lose balance because of dizziness</strong> OR have you lost consciousness in the last 12 months?</div>
        <div class="toggle-yn">
          <button class="yn-btn yes" onclick="toggleYN(this,'parq3','yes')">YES</button>
          <button class="yn-btn no" onclick="toggleYN(this,'parq3','no')">NO</button>
        </div>
      </div>
      <div class="parq-item">
        <div class="parq-text">4. Have you ever been diagnosed with <strong>another chronic medical condition</strong> (other than heart disease or high blood pressure)?</div>
        <div class="toggle-yn">
          <button class="yn-btn yes" onclick="toggleYN(this,'parq4','yes')">YES</button>
          <button class="yn-btn no" onclick="toggleYN(this,'parq4','no')">NO</button>
        </div>
      </div>
      <input type="text" id="parq4-detail" placeholder="If YES ‚Äî list condition(s) here" style="margin-top:-10px; display:none;" />
      <div class="parq-item">
        <div class="parq-text">5. Are you currently taking <strong>prescribed medications</strong> for a chronic medical condition?</div>
        <div class="toggle-yn">
          <button class="yn-btn yes" onclick="toggleYN(this,'parq5','yes')">YES</button>
          <button class="yn-btn no" onclick="toggleYN(this,'parq5','no')">NO</button>
        </div>
      </div>
      <input type="text" id="parq5-detail" placeholder="If YES ‚Äî list condition(s) and medications" style="margin-top:-10px; display:none;" />
      <div class="parq-item">
        <div class="parq-text">6. Do you currently have a <strong>bone, joint, or soft tissue problem</strong> that could be made worse by becoming more physically active?</div>
        <div class="toggle-yn">
          <button class="yn-btn yes" onclick="toggleYN(this,'parq6','yes')">YES</button>
          <button class="yn-btn no" onclick="toggleYN(this,'parq6','no')">NO</button>
        </div>
      </div>
      <div class="parq-item">
        <div class="parq-text">7. Has your doctor ever said that you should only do <strong>medically supervised physical activity</strong>?</div>
        <div class="toggle-yn">
          <button class="yn-btn yes" onclick="toggleYN(this,'parq7','yes')">YES</button>
          <button class="yn-btn no" onclick="toggleYN(this,'parq7','no')">NO</button>
        </div>
      </div>

      <div style="margin-top:30px;">
        <div class="subsection-label">Participant Declaration</div>
        <div class="form-grid">
          <div class="field">
            <label>Full Name</label>
            <input type="text" id="parq-name" placeholder="Your full name" />
          </div>
          <div class="field">
            <label>Date</label>
            <input type="date" id="parq-date" />
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ‚îÄ SECTION 1: HEALTH HISTORY ‚îÄ‚îÄ‚îÄ -->
  <div class="form-section" id="section-1">
    <div class="section-wrap">
      <div class="section-title">Lifestyle & Health History</div>
      <div class="section-subtitle">NASM CPT7 ¬∑ Lifestyle and Health History Questionnaire</div>

      <div class="subsection-label">Personal Information</div>
      <div class="form-grid">
        <div class="field"><label>Full Name</label><input type="text" id="hh-name" placeholder="First Last" /></div>
        <div class="field"><label>Age</label><input type="number" id="hh-age" placeholder="Years" /></div>
        <div class="field"><label>Gender</label>
          <select id="hh-gender">
            <option value="">Select</option>
            <option>Male</option><option>Female</option><option>Non-binary</option><option>Prefer not to say</option>
          </select>
        </div>
        <div class="field"><label>Occupation</label><input type="text" id="hh-occupation" placeholder="Your job title/role" /></div>
        <div class="field"><label>Physician Name & Phone</label><input type="text" id="hh-physician" placeholder="Dr. Smith ¬∑ (214) 555-0100" /></div>
        <div class="field"><label>Emergency Contact</label><input type="text" id="hh-emergency" placeholder="Name ¬∑ Phone" /></div>
      </div>

      <hr class="divider">
      <div class="subsection-label">Exercise History</div>
      <div class="form-grid full">
        <div class="field"><label>Current exercise activities</label><input type="text" id="hh-exercise" placeholder="e.g., running 3x/week, weightlifting, yoga..." /></div>
        <div class="field"><label>Days/week with 60+ min moderate exercise</label><input type="number" id="hh-days" placeholder="0‚Äì7" min="0" max="7" /></div>
      </div>

      <hr class="divider">
      <div class="subsection-label">Lifestyle</div>
      <div class="form-grid">
        <div class="field"><label>Do you get enough sleep?</label>
          <div class="radio-group">
            <div class="radio-btn" onclick="selectRadio(this,'sleep')">Yes</div>
            <div class="radio-btn" onclick="selectRadio(this,'sleep')">No</div>
            <div class="radio-btn" onclick="selectRadio(this,'sleep')">Sometimes</div>
          </div>
        </div>
        <div class="field"><label>Do you smoke / use vaporizer?</label>
          <div class="radio-group">
            <div class="radio-btn" onclick="selectRadio(this,'smoke')">Yes</div>
            <div class="radio-btn" onclick="selectRadio(this,'smoke')">No</div>
            <div class="radio-btn" onclick="selectRadio(this,'smoke')">Occasionally</div>
          </div>
        </div>
        <div class="field">
          <div class="scale-row"><label>Stress Level (0‚Äì10)</label><input type="range" id="stress-scale" min="0" max="10" value="5" oninput="document.getElementById('stress-val').textContent=this.value"><span class="scale-val" id="stress-val">5</span></div>
        </div>
        <div class="field"><label>Alcoholic drinks/week</label><input type="number" id="hh-alcohol" placeholder="0" min="0" /></div>
      </div>

      <hr class="divider">
      <div class="subsection-label">Medical History</div>
      <div class="form-grid full">
        <div class="field"><label>Past musculoskeletal injuries</label><textarea id="hh-injuries" placeholder="List any past injuries (e.g., ACL tear 2019, right shoulder impingement...)"></textarea></div>
        <div class="field"><label>Past surgeries</label><textarea id="hh-surgeries" placeholder="List any surgeries and dates..."></textarea></div>
        <div class="field"><label>Chronic health conditions</label><textarea id="hh-conditions" placeholder="e.g., hypertension, Type 2 diabetes, asthma..."></textarea></div>
        <div class="field"><label>Current medications</label><textarea id="hh-meds" placeholder="List medications and dosages..."></textarea></div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ‚îÄ SECTION 2: BODY COMPOSITION ‚îÄ‚îÄ‚îÄ -->
  <div class="form-section" id="section-2">
    <div class="section-wrap">
      <div class="section-title">Body Composition</div>
      <div class="section-subtitle">NASM CPT7 ¬∑ Self-reported measurements ¬∑ Use a flexible tape measure for circumferences</div>

      <div class="subsection-label">Basic Metrics</div>
      <div class="form-grid three">
        <div class="field"><label>Height (inches)</label><input type="number" id="bc-height" placeholder="e.g., 68" /></div>
        <div class="field"><label>Weight (lbs)</label><input type="number" id="bc-weight" placeholder="e.g., 165" /></div>
        <div class="field"><label>BMI (auto-calculated)</label><input type="text" id="bc-bmi" placeholder="Calculated" readonly style="color: var(--accent);" /></div>
      </div>

      <hr class="divider">
      <div class="subsection-label">Circumference Measurements (inches)</div>
      <div class="form-grid three">
        <div class="field"><label>Neck</label><input type="number" id="circ-neck" placeholder="0.0" step="0.1" oninput="calcWHR()" /></div>
        <div class="field"><label>Chest</label><input type="number" id="circ-chest" placeholder="0.0" step="0.1" /></div>
        <div class="field"><label>Arms</label><input type="number" id="circ-arms" placeholder="0.0" step="0.1" /></div>
        <div class="field"><label>Waist</label><input type="number" id="circ-waist" placeholder="0.0" step="0.1" oninput="calcWHR()" /></div>
        <div class="field"><label>Hips</label><input type="number" id="circ-hips" placeholder="0.0" step="0.1" oninput="calcWHR()" /></div>
        <div class="field"><label>Thighs</label><input type="number" id="circ-thighs" placeholder="0.0" step="0.1" /></div>
        <div class="field"><label>Calves</label><input type="number" id="circ-calves" placeholder="0.0" step="0.1" /></div>
        <div class="field"><label>Waist-to-Hip Ratio</label><input type="text" id="bc-whr" placeholder="Calculated" readonly style="color: var(--accent);" /></div>
      </div>

      <hr class="divider">
      <div class="subsection-label">Resting Vitals</div>
      <div class="form-grid three">
        <div class="field"><label>Resting Heart Rate (bpm)</label><input type="number" id="bc-rhr" placeholder="e.g., 68" /></div>
        <div class="field"><label>Blood Pressure (if known)</label><input type="text" id="bc-bp" placeholder="e.g., 120/80" /></div>
        <div class="field"><label>HRmax Estimate (220 - Age)</label><input type="text" id="bc-hrmax" placeholder="Calculated" readonly style="color: var(--accent);" /></div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ‚îÄ SECTION 3: GOALS ‚îÄ‚îÄ‚îÄ -->
  <div class="form-section" id="section-3">
    <div class="section-wrap">
      <div class="section-title">Goals & Fitness Priorities</div>
      <div class="section-subtitle">Per Bandura & Simon (1977) ‚Äî proximal goal-setting is the foundation of your program design</div>

      <div class="subsection-label">Goal Importance (0 = Not Important ¬∑ 10 = Critical)</div>
      <div style="display:flex; flex-direction:column; gap: 18px; margin-bottom: 36px;">
        <div class="scale-row"><label>Weight Loss</label><input type="range" min="0" max="10" value="5" oninput="document.getElementById('g1-val').textContent=this.value; updateGoalBar('bar1',this.value)"><span class="scale-val" id="g1-val">5</span></div>
        <div class="scale-row"><label>Muscle Gain</label><input type="range" min="0" max="10" value="5" oninput="document.getElementById('g2-val').textContent=this.value; updateGoalBar('bar2',this.value)"><span class="scale-val" id="g2-val">5</span></div>
        <div class="scale-row"><label>Sports Performance</label><input type="range" min="0" max="10" value="5" oninput="document.getElementById('g3-val').textContent=this.value; updateGoalBar('bar3',this.value)"><span class="scale-val" id="g3-val">5</span></div>
        <div class="scale-row"><label>Health Improvement</label><input type="range" min="0" max="10" value="5" oninput="document.getElementById('g4-val').textContent=this.value; updateGoalBar('bar4',this.value)"><span class="scale-val" id="g4-val">5</span></div>
        <div class="scale-row"><label>Corrective Exercise / Pain Relief</label><input type="range" min="0" max="10" value="5" oninput="document.getElementById('g5-val').textContent=this.value; updateGoalBar('bar5',this.value)"><span class="scale-val" id="g5-val">5</span></div>
      </div>

      <hr class="divider">
      <div class="subsection-label">Your Primary Goal (in your own words)</div>
      <div class="form-grid full">
        <div class="field"><label>What is the #1 outcome you want from training?</label><textarea id="goal-primary" placeholder="e.g., I want to lose 20 lbs before my MBA graduation in May and reduce my lower back pain that has been getting worse from sitting all day..." style="min-height: 100px;"></textarea></div>
        <div class="field"><label>Timeline / Key Dates</label><input type="text" id="goal-timeline" placeholder="e.g., 16 weeks, event on June 15th..." /></div>
        <div class="field"><label>Training availability (days/week + preferred times)</label><input type="text" id="goal-availability" placeholder="e.g., 4 days/week, mornings before 8am or evenings after 7pm" /></div>
        <div class="field"><label>Any constraints or concerns?</label><textarea id="goal-constraints" placeholder="e.g., travel for work 2 weeks/month, right knee bothers me on stairs, budget for gym only..."></textarea></div>
      </div>

      <hr class="divider">
      <div class="subsection-label">Readiness Self-Assessment</div>
      <p style="font-size:0.74rem; color:var(--gray); margin-bottom:16px;">Per Krause (NASM, 2008) ‚Äî your stage of readiness determines the optimal coaching approach.</p>
      <div class="radio-group" id="stage-select">
        <div class="radio-btn" onclick="selectRadio(this,'stage')">Pre-contemplation<br><small style="color:var(--gray);font-size:0.6rem">Not thinking about change</small></div>
        <div class="radio-btn" onclick="selectRadio(this,'stage')">Contemplation<br><small style="color:var(--gray);font-size:0.6rem">Thinking about it</small></div>
        <div class="radio-btn" onclick="selectRadio(this,'stage')">Preparation<br><small style="color:var(--gray);font-size:0.6rem">Planning to start soon</small></div>
        <div class="radio-btn" onclick="selectRadio(this,'stage')">Action<br><small style="color:var(--gray);font-size:0.6rem">Already making changes</small></div>
        <div class="radio-btn" onclick="selectRadio(this,'stage')">Maintenance<br><small style="color:var(--gray);font-size:0.6rem">Sustained for 6+ months</small></div>
      </div>
    </div>
  </div>

  <!-- ‚îÄ‚îÄ‚îÄ SECTION 4: ASSESSMENT VIDEOS ‚îÄ‚îÄ‚îÄ -->
  <div class="form-section" id="section-4">
    <div class="section-wrap">
      <div class="section-title">Movement Assessments</div>
      <div class="section-subtitle">Upload short videos of each assessment. Your trainer will perform AI-assisted biomechanical analysis prior to your first session.</div>

      <div class="upload-note">
        <strong style="color:var(--accent2);">Recording Instructions:</strong> Film from the ANTERIOR (front) and LATERAL (side) views for each movement. Wear form-fitting clothing. Use a stable surface for your phone. Each video should be 15‚Äì30 seconds.
      </div>

      <br>
      <div class="upload-grid">
        <div class="upload-box" id="upload-ohsa">
          <input type="file" accept="video/*" onchange="fileUploaded(this,'upload-ohsa','ohsa-status')" />
          <div class="upload-icon">üèãÔ∏è</div>
          <div class="upload-title">Overhead Squat (OHSA)</div>
          <div class="upload-desc">Arms overhead, squat to parallel. Record 5 reps from anterior + lateral view.</div>
          <div class="upload-status" id="ohsa-status"></div>
        </div>

        <div class="upload-box" id="upload-slsa">
          <input type="file" accept="video/*" onchange="fileUploaded(this,'upload-slsa','slsa-status')" />
          <div class="upload-icon">ü¶µ</div>
          <div class="upload-title">Single-Leg Squat (SLSA)</div>
          <div class="upload-desc">Balance on one leg, squat to 60¬∞. Record 3 reps each leg, anterior view.</div>
          <div class="upload-status" id="slsa-status"></div>
        </div>

        <div class="upload-box" id="upload-push">
          <input type="file" accept="video/*" onchange="fileUploaded(this,'upload-push','push-status')" />
          <div class="upload-icon">üí™</div>
          <div class="upload-title">Pushing Assessment</div>
          <div class="upload-desc">Wall push or push-up. Record lateral view, 5 reps, showing full shoulder range.</div>
          <div class="upload-status" id="push-status"></div>
        </div>

        <div class="upload-box" id="upload-pull">
          <input type="file" accept="video/*" onchange="fileUploaded(this,'upload-pull','pull-status')" />
          <div class="upload-icon">ü§∏</div>
          <div class="upload-title">Pulling Assessment</div>
          <div class="upload-desc">Band pull-apart or cable row. Record lateral view, 5 reps.</div>
          <div class="upload-status" id="pull-status"></div>
        </div>

        <div class="upload-box" id="upload-cardio">
          <input type="file" accept="video/*" onchange="fileUploaded(this,'upload-cardio','cardio-status')" />
          <div class="upload-icon">‚ù§Ô∏è</div>
          <div class="upload-title">Cardio Test</div>
          <div class="upload-desc">YMCA 3-min step test OR Rockport Walk Test. Record your form and note your heart rate below.</div>
          <div class="upload-status" id="cardio-status"></div>
        </div>

        <div class="upload-box" style="cursor:default; border-style:solid; border-color: var(--border);">
          <div class="upload-icon">üìã</div>
          <div class="upload-title">Cardio Test Results</div>
          <div class="upload-desc" style="text-align:left;">
            <div class="form-grid full" style="margin-top:10px;">
              <div class="field"><label>Test Type</label>
                <select id="cardio-type" style="font-size:0.7rem; padding:8px 10px;">
                  <option>YMCA 3-Min Step Test</option>
                  <option>Rockport Walk Test</option>
                  <option>1.5 Mile Run</option>
                  <option>VT1/VT2 Talk Test</option>
                </select>
              </div>
              <div class="field"><label>Recovery HR (bpm)</label><input type="number" id="cardio-hr" placeholder="e.g., 110" /></div>
              <div class="field"><label>Completion Time (if applicable)</label><input type="text" id="cardio-time" placeholder="e.g., 14:32" /></div>
            </div>
          </div>
        </div>
      </div>

      <hr class="divider">
      <div class="subsection-label">Self-Reported Postural Observations</div>
      <p style="font-size:0.74rem; color:var(--gray); margin-bottom:20px;">Based on the NASM Static Postural Assessment. Check any that apply to you.</p>
      <div class="radio-group" style="flex-wrap:wrap; gap:10px;">
        <div class="radio-btn" onclick="this.classList.toggle('selected')">Flat feet / arches collapse</div>
        <div class="radio-btn" onclick="this.classList.toggle('selected')">Feet turn out when walking</div>
        <div class="radio-btn" onclick="this.classList.toggle('selected')">Knees cave inward (valgus)</div>
        <div class="radio-btn" onclick="this.classList.toggle('selected')">Excessive forward lean</div>
        <div class="radio-btn" onclick="this.classList.toggle('selected')">Low back arches excessively</div>
        <div class="radio-btn" onclick="this.classList.toggle('selected')">Shoulders round forward</div>
        <div class="radio-btn" onclick="this.classList.toggle('selected')">Head juts forward</div>
        <div class="radio-btn" onclick="this.classList.toggle('selected')">One shoulder higher than other</div>
      </div>

      <br><br>
      <div class="field">
        <label>Additional notes for your trainer</label>
        <textarea id="assessment-notes" placeholder="Any pain, discomfort, or limitations you experienced during these assessments..."></textarea>
      </div>
    </div>
  </div>

  <!-- Submit Screen -->
  <div class="submit-screen" id="submit-screen">
    <div class="submit-icon">‚úÖ</div>
    <h2>Intake Complete.</h2>
    <p>Your assessment data has been submitted. Your EC Fitness AI Specialist will review your findings and prepare a pre-session briefing. You'll receive a summary before your first appointment.</p>
    <div class="processing-bar"><div class="processing-fill"></div></div>
    <p style="margin-top:16px; font-size:0.68rem;">Analyzing biomechanical data<span class="loading-dots"></span></p>
    <br>
    <button class="btn btn-secondary" onclick="switchView('trainer'); setTimeout(loadDemoClient, 500)">Preview Trainer Dashboard ‚Üí</button>
  </div>

  <!-- Form Navigation -->
  <div class="form-nav" id="form-nav">
    <button class="btn btn-secondary" id="btn-back" onclick="prevStep()" style="visibility:hidden;">‚Üê Back</button>
    <span style="font-size:0.65rem; color:var(--gray);" id="step-counter">Step 1 of 5</span>
    <button class="btn btn-primary" id="btn-next" onclick="nextStep()">Continue ‚Üí</button>
  </div>

</div><!-- end client view -->


<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     TRAINER DASHBOARD VIEW
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="view" id="view-trainer">

  <div class="dashboard-header">
    <div class="dash-label">EC Fitness AI Specialist ¬∑ Trainer Console</div>
    <h2>Pre-Session Briefings</h2>
  </div>

  <!-- Client chips -->
  <div class="client-bar" id="client-bar">
    <div class="client-chip active" onclick="selectClient(this,'demo')" id="chip-demo">
      <div class="client-avatar">JD</div>
      <span class="client-name">John D. ¬∑ Demo</span>
      <div class="client-flag" style="background:var(--yellow-flag);"></div>
    </div>
    <div style="font-size:0.68rem; color:var(--gray); padding: 0 10px;">‚Üê Submitted clients will appear here</div>
  </div>

  <!-- AI Generate -->
  <div class="ai-generate-wrap">
    <button class="ai-generate-btn" id="ai-gen-btn" onclick="generateAIAnalysis()">
      <div class="spinner" id="ai-spinner"></div>
      <span>‚óÜ Generate AI Analysis</span>
    </button>
    <div class="ai-note">Runs the EC Fitness AI Specialist protocol: biomechanical analysis ‚Üí risk flags ‚Üí CEX protocol ‚Üí behavior stage assessment. Powered by Claude Sonnet 4.</div>
  </div>

  <!-- AI Response Card -->
  <div class="ai-response" id="ai-response">
    <div class="ai-response-label">EC Fitness AI Specialist ¬∑ Analysis Report</div>
    <div class="ai-response-text" id="ai-response-text"></div>
  </div>

  <!-- Dashboard Grid -->
  <div class="dash-grid" id="dash-grid">

    <div class="empty-state">
      <h3>No client selected</h3>
      <p>Select a client from the bar above, or submit the intake form to generate a pre-session briefing.</p>
    </div>

  </div>

</div><!-- end trainer view -->


<script>
// ‚îÄ‚îÄ‚îÄ STATE ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let currentStep = 0;
const totalSteps = 5;
const parqAnswers = {};

// ‚îÄ‚îÄ‚îÄ VIEW SWITCHING ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function switchView(v) {
  document.querySelectorAll('.view').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(el => el.classList.remove('active'));
  document.getElementById('view-' + v).classList.add('active');
  document.querySelectorAll('.nav-tab')[v === 'client' ? 0 : 1].classList.add('active');
}

// ‚îÄ‚îÄ‚îÄ FORM STEPS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function updateStepper() {
  for (let i = 0; i < totalSteps; i++) {
    const s = document.getElementById('step-' + i);
    s.classList.remove('active','done');
    if (i < currentStep) s.classList.add('done');
    else if (i === currentStep) s.classList.add('active');
  }
  document.getElementById('step-counter').textContent = `Step ${currentStep + 1} of ${totalSteps}`;
  document.getElementById('btn-back').style.visibility = currentStep > 0 ? 'visible' : 'hidden';
  document.getElementById('btn-next').textContent = currentStep === totalSteps - 1 ? 'Submit Intake ‚úì' : 'Continue ‚Üí';
  document.getElementById('btn-next').className = currentStep === totalSteps - 1 ? 'btn btn-submit' : 'btn btn-primary';
}

function showSection(n) {
  document.querySelectorAll('.form-section').forEach(s => s.classList.remove('active'));
  document.getElementById('section-' + n).classList.add('active');
}

function nextStep() {
  if (currentStep < totalSteps - 1) {
    currentStep++;
    showSection(currentStep);
    updateStepper();
    window.scrollTo(0,0);
  } else {
    // Submit
    document.querySelectorAll('.form-section').forEach(s => s.classList.remove('active'));
    document.getElementById('form-nav').style.display = 'none';
    document.getElementById('stepper').style.display = 'none';
    document.getElementById('submit-screen').classList.add('active');
    window.scrollTo(0,0);
  }
}

function prevStep() {
  if (currentStep > 0) {
    currentStep--;
    showSection(currentStep);
    updateStepper();
    window.scrollTo(0,0);
  }
}

// ‚îÄ‚îÄ‚îÄ PAR-Q TOGGLES ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function toggleYN(btn, key, val) {
  const group = btn.closest('.toggle-yn');
  group.querySelectorAll('.yn-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
  parqAnswers[key] = val;
  const d4 = document.getElementById('parq4-detail');
  const d5 = document.getElementById('parq5-detail');
  if (key === 'parq4') d4.style.display = val === 'yes' ? 'block' : 'none';
  if (key === 'parq5') d5.style.display = val === 'yes' ? 'block' : 'none';
}

// ‚îÄ‚îÄ‚îÄ RADIO GROUPS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function selectRadio(btn, group) {
  const parent = btn.closest('.radio-group') || btn.parentElement;
  parent.querySelectorAll('.radio-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
}

// ‚îÄ‚îÄ‚îÄ BMI / WHR AUTO-CALC ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
document.addEventListener('input', function(e) {
  if (['bc-height','bc-weight'].includes(e.target.id)) calcBMI();
  if (['hh-age'].includes(e.target.id)) calcHRmax();
});

function calcBMI() {
  const h = parseFloat(document.getElementById('bc-height').value);
  const w = parseFloat(document.getElementById('bc-weight').value);
  if (h && w) {
    const bmi = ((w / (h * h)) * 703).toFixed(1);
    document.getElementById('bc-bmi').value = bmi;
  }
}
function calcWHR() {
  const waist = parseFloat(document.getElementById('circ-waist').value);
  const hips = parseFloat(document.getElementById('circ-hips').value);
  if (waist && hips) document.getElementById('bc-whr').value = (waist / hips).toFixed(2);
}
function calcHRmax() {
  const age = parseFloat(document.getElementById('hh-age').value);
  if (age) document.getElementById('bc-hrmax').value = Math.round(220 - age) + ' bpm';
}

function updateGoalBar(id, val) { /* visual only via sliders */ }

// ‚îÄ‚îÄ‚îÄ VIDEO UPLOADS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function fileUploaded(input, boxId, statusId) {
  if (input.files && input.files[0]) {
    document.getElementById(boxId).classList.add('has-file');
    document.getElementById(statusId).textContent = '‚úì ' + input.files[0].name;
  }
}

// ‚îÄ‚îÄ‚îÄ DEMO DASHBOARD DATA ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const demoClient = {
  name: "Jordan M.",
  initials: "JM",
  age: 34,
  flagLevel: "yellow",
  riskFlags: [
    { level: "yellow", text: "Elevated resting blood pressure reported: 138/88 mmHg. Approaches threshold requiring medical clearance for vigorous exercise.", source: "Per MacDougall et al. (1985) ‚Äî arterial BP spikes during heavy resistance training; hypertensive clients require physician clearance before maximal loads." },
    { level: "yellow", text: "Self-reported lower back pain (chronic). History of L4-L5 disc herniation (2021), cleared by physician but not formally rehabilitated with PT.", source: "Per Lombardi & Troxel (2003) ‚Äî lumbar injuries represent a leading category in weightlifting-related incidents. Corrective protocol required before loading." },
    { level: "green", text: "PAR-Q+ cleared ‚Äî answered NO to all 7 general health questions. No cardiovascular contraindications flagged.", source: "Per Tharrett & Peterson (IHRSA) ‚Äî PAR-Q+ clearance is the minimum standard for initiating a fitness program." },
    { level: "yellow", text: "Occupation: sedentary desk work 8‚Äì10 hrs/day. Confirmed heel-wearing footwear (dress shoes). High postural distortion risk.", source: "Per NASM CPT7 ‚Äî prolonged sitting is a primary driver of lower crossed syndrome; heel elevation shortens the gastrocnemius/soleus complex." }
  ],
  findings: [
    { checkpoint: "Feet/Ankle", compensation: "Turn Out", overactive: ["Lateral Gastrocnemius", "Soleus", "Biceps Femoris"], underactive: ["Medial Gastroc", "Post. Tibialis", "Gluteus Maximus"] },
    { checkpoint: "Knee", compensation: "Valgus (Move In)", overactive: ["Adductor Complex", "TFL", "Vastus Lateralis"], underactive: ["Gluteus Medius", "Gluteus Maximus", "VMO"] },
    { checkpoint: "LPHC", compensation: "Low Back Arch", overactive: ["Hip Flexors", "Erector Spinae", "Latissimus Dorsi"], underactive: ["Gluteus Maximus", "Hamstrings", "Core Stabilizers"] },
    { checkpoint: "Upper Body", compensation: "Arms Fall Forward", overactive: ["Latissimus Dorsi", "Teres Major", "Pectoralis Major"], underactive: ["Mid Trapezius", "Lower Trapezius", "Rhomboids"] }
  ],
  cex: {
    inhibit: ["Foam roll: lateral gastroc/soleus (90 sec each)", "Foam roll: TFL/IT band (60 sec each side)", "Foam roll: thoracic spine (90 sec)", "Foam roll: hip flexors/psoas (60 sec each)"],
    lengthen: ["Static stretch: gastrocnemius (30 sec √ó 2)", "Static stretch: hip flexor lunge (30 sec √ó 2)", "Static stretch: pectoral doorway stretch (30 sec √ó 2)", "Brettzel stretch: thoracic rotation (30 sec √ó 2)"],
    activate: ["Isolated activation: glute bridge (2√ó15, 2-sec hold)", "Isolated activation: clamshell (2√ó15 each)", "Isolated activation: prone cobra (2√ó15)", "Isolated activation: dead bug (2√ó10 each side)"],
    integrate: ["Goblet squat with heel elevations (2√ó12, tempo 3-1-2)", "Cable pull-through (2√ó12)", "Scapular wall slide (2√ó15)", "Single-leg RDL bodyweight (2√ó10 each)"]
  },
  stage: "Preparation",
  stageIndex: 2,
  stageDesc: "Client is in the Preparation stage ‚Äî actively planning to begin training within the next 2‚Äì4 weeks. Coaching approach: provide structured, achievable proximal goals (per Bandura & Simon, 1977) that build early confidence. Avoid overwhelming with complex programming in session 1.",
  goals: [
    { label: "Weight Loss", score: 8 },
    { label: "Lower Back Pain Relief", score: 9 },
    { label: "Muscle Gain", score: 5 },
    { label: "Health Improvement", score: 7 }
  ]
};

function loadDemoClient() { renderDashboard(demoClient); }

function selectClient(chip, id) {
  document.querySelectorAll('.client-chip').forEach(c => c.classList.remove('active'));
  chip.classList.add('active');
  if (id === 'demo') renderDashboard(demoClient);
}

function renderDashboard(client) {
  const grid = document.getElementById('dash-grid');

  // Risk flags HTML
  const flagsHTML = client.riskFlags.map(f => `
    <div class="flag-item ${f.level}">
      <div class="flag-dot ${f.level}"></div>
      <div>
        <div class="flag-text">${f.text}</div>
        <div class="flag-source">${f.source}</div>
      </div>
    </div>`).join('');

  // Findings HTML
  const findingsHTML = client.findings.map(f => `
    <tr>
      <td>${f.checkpoint}</td>
      <td><span class="comp-tag">${f.compensation}</span></td>
      <td><div class="muscle-list">${f.overactive.map(m=>`<span class="muscle-tag over">${m}</span>`).join('')}</div></td>
      <td><div class="muscle-list">${f.underactive.map(m=>`<span class="muscle-tag under">${m}</span>`).join('')}</div></td>
    </tr>`).join('');

  // Stage meter
  const stageNames = ['Pre-contemplation','Contemplation','Preparation','Action','Maintenance'];
  const segs = stageNames.map((n,i) => `<div class="stage-seg ${i <= client.stageIndex ? 'lit' : ''}"></div>`).join('');
  const stageLabels = stageNames.map(n => `<div class="stage-label-item">${n.substring(0,4)}.</div>`).join('');

  // Goals
  const goalsHTML = client.goals.map(g => `
    <div class="goal-item">
      <span style="min-width:160px; font-size:0.72rem;">${g.label}</span>
      <div class="goal-bar-wrap"><div class="goal-bar" style="width:${g.score*10}%"></div></div>
      <span class="goal-score">${g.score}/10</span>
    </div>`).join('');

  grid.innerHTML = `
    <!-- Risk Flags -->
    <div class="dash-card wide">
      <div class="card-label">Safety & Risk Assessment <span class="badge badge-yellow">2 FLAGS</span></div>
      <div class="flag-list">${flagsHTML}</div>
    </div>

    <!-- Behavior Stage -->
    <div class="dash-card">
      <div class="card-label">Behavior Stage ¬∑ Goal Alignment</div>
      <div class="stage-meter">
        <div class="stage-track">${segs}</div>
        <div class="stage-labels">${stageLabels}</div>
      </div>
      <div class="stage-current">${client.stage}</div>
      <div class="stage-desc">${client.stageDesc}</div>
      <div class="goal-list">${goalsHTML}</div>
    </div>

    <!-- Biomechanical Findings -->
    <div class="dash-card full">
      <div class="card-label">Biomechanical Assessment Findings <span class="badge badge-red">4 COMPENSATIONS</span></div>
      <table class="findings-table">
        <thead><tr><th>Checkpoint</th><th>Compensation</th><th>Overactive (Inhibit/Lengthen)</th><th>Underactive (Activate/Integrate)</th></tr></thead>
        <tbody>${findingsHTML}</tbody>
      </table>
      <div style="margin-top:14px; font-size:0.65rem; color:var(--gray); font-style:italic;">
        Source: NASM CPT7 Solutions Table ¬∑ AI_Fitness_Assessment_and_Programming.xlsx
      </div>
    </div>

    <!-- CEX Protocol -->
    <div class="dash-card wide">
      <div class="card-label">Corrective Exercise Protocol ‚Äî CEX Continuum</div>
      <div class="cex-stages">
        <div class="cex-stage">
          <div class="cex-stage-num">Stage 1</div>
          <div class="cex-stage-name">Inhibit</div>
          ${client.cex.inhibit.map(i=>`<div class="cex-item">${i}</div>`).join('')}
        </div>
        <div class="cex-stage">
          <div class="cex-stage-num">Stage 2</div>
          <div class="cex-stage-name">Lengthen</div>
          ${client.cex.lengthen.map(i=>`<div class="cex-item">${i}</div>`).join('')}
        </div>
        <div class="cex-stage">
          <div class="cex-stage-num">Stage 3</div>
          <div class="cex-stage-name">Activate</div>
          ${client.cex.activate.map(i=>`<div class="cex-item">${i}</div>`).join('')}
        </div>
        <div class="cex-stage">
          <div class="cex-stage-num">Stage 4</div>
          <div class="cex-stage-name">Integrate</div>
          ${client.cex.integrate.map(i=>`<div class="cex-item">${i}</div>`).join('')}
        </div>
      </div>
      <div style="margin-top:14px; font-size:0.65rem; color:var(--gray); font-style:italic;">
        Per NASM Corrective Exercise Continuum ¬∑ Inhibit ‚Üí Lengthen ‚Üí Activate ‚Üí Integrate
      </div>
    </div>

    <!-- Session Prep Notes -->
    <div class="dash-card">
      <div class="card-label">Session 1 Preparation Notes</div>
      <div class="flag-list">
        <div class="flag-item yellow">
          <div class="flag-dot yellow"></div>
          <div>
            <div class="flag-text">Confirm BP reading at session start. If ‚â•140/90, defer loading protocol.</div>
            <div class="flag-source">MacDougall et al. (1985)</div>
          </div>
        </div>
        <div class="flag-item yellow">
          <div class="flag-dot yellow"></div>
          <div>
            <div class="flag-text">Do NOT begin resistance loading until L4-L5 history is verbally reviewed and client demonstrates pain-free OHSA.</div>
            <div class="flag-source">Lombardi & Troxel (2003)</div>
          </div>
        </div>
        <div class="flag-item green">
          <div class="flag-dot green"></div>
          <div>
            <div class="flag-text">Use Bandura proximal goal framework: establish 2-week "wins" targets during session 1 goal-setting conversation.</div>
            <div class="flag-source">Bandura & Simon (1977); Palys & Little (1983)</div>
          </div>
        </div>
        <div class="flag-item green">
          <div class="flag-dot green"></div>
          <div>
            <div class="flag-text">Client is in Preparation stage ‚Äî high motivation, needs structure. Avoid information overload. One clear action plan.</div>
            <div class="flag-source">Krause (NASM, 2008)</div>
          </div>
        </div>
      </div>
    </div>
  `;
}

// ‚îÄ‚îÄ‚îÄ AI ANALYSIS ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function generateAIAnalysis() {
  const btn = document.getElementById('ai-gen-btn');
  const spinner = document.getElementById('ai-spinner');
  const responseDiv = document.getElementById('ai-response');
  const responseText = document.getElementById('ai-response-text');

  spinner.style.display = 'block';
  btn.disabled = true;
  responseDiv.classList.add('visible');
  responseText.textContent = 'Generating analysis';
  responseText.classList.add('loading-dots');

  const prompt = `You are the "EC Fitness AI Specialist," a highly advanced biomechanical analyst and research-grounded personal trainer.

CLIENT PROFILE (Demo: Jordan M., Age 34, Sedentary desk worker, 8-10 hrs/day sitting):
- PAR-Q+: Cleared (all NO)
- Blood Pressure: 138/88 mmHg (borderline elevated)
- Past Injury: L4-L5 disc herniation (2021), physician-cleared but not PT-rehabilitated
- Occupation: Corporate, prolonged sitting, dress shoes daily
- Behavior Stage: Preparation
- Top Goals: Lower back pain relief (9/10), Weight loss (8/10), Health improvement (7/10)

OHSA COMPENSATIONS IDENTIFIED:
1. Feet/Ankle: Turn Out ‚Üí Overactive: Lateral Gastrocnemius, Soleus, Biceps Femoris | Underactive: Medial Gastroc, Post. Tibialis, Gluteus Maximus
2. Knee: Valgus ‚Üí Overactive: Adductor Complex, TFL, Vastus Lateralis | Underactive: Gluteus Medius, Gluteus Maximus, VMO
3. LPHC: Low Back Arch ‚Üí Overactive: Hip Flexors, Erector Spinae, Latissimus Dorsi | Underactive: Gluteus Maximus, Hamstrings, Core Stabilizers
4. Upper Body: Arms Fall Forward ‚Üí Overactive: Lats, Teres Major, Pectoralis Major | Underactive: Mid/Lower Trapezius, Rhomboids

RESEARCH CITATIONS TO USE:
- MacDougall et al. (1985): arterial BP response to heavy resistance training
- Lombardi & Troxel (2003): injury statistics in weightlifting
- Tharrett & Peterson (IHRSA): risk management and medical clearance
- Krause (NASM, 2008): behavior modification, stages of change
- Bandura & Simon (1977): proximal goal-setting
- Palys & Little (1983): life satisfaction and personal project systems
- Cappuccio (NASM, 2008): scope of practice

Generate a concise pre-session briefing in this exact format:

SECTION 1 ‚Äî BIOMECHANICAL OBSERVATIONS
[2-3 key findings from the OHSA, citing NASM Solutions Table]

SECTION 2 ‚Äî RISK ASSESSMENT
[Specific risk flags with research citations]

SECTION 3 ‚Äî CORRECTIVE PROTOCOL PRIORITY ORDER
[Top 3 priority corrective exercises with stage (Inhibit/Lengthen/Activate/Integrate) and rationale]

SECTION 4 ‚Äî COACHING APPROACH
[Behavior stage analysis with Bandura/Krause citations and session 1 strategy]

Be clinical, precise, and cite every claim. No conversational filler.`;

  try {
    const response = await fetch("https://api.anthropic.com/v1/messages", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        model: "claude-sonnet-4-20250514",
        max_tokens: 1000,
        messages: [{ role: "user", content: prompt }]
      })
    });

    const data = await response.json();
    const text = data.content.map(i => i.text || "").join("\n");
    responseText.classList.remove('loading-dots');
    responseText.textContent = text;
  } catch (err) {
    responseText.classList.remove('loading-dots');
    responseText.textContent = `[API Error: ${err.message}. In a live deployment, this would call the Claude API with the client's full intake data and return a structured clinical briefing.]`;
  }

  spinner.style.display = 'none';
  btn.disabled = false;
}

// ‚îÄ‚îÄ‚îÄ INIT ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
updateStepper();
// Auto-set today's date
const today = new Date().toISOString().split('T')[0];
document.getElementById('parq-date').value = today;
</script>
</body>
</html>
